<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>{% block title %}MRI Planning Guide{% endblock %}</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            display: ['"Barlow Semi Condensed"','sans-serif'],
            body:    ['"Source Sans 3"','sans-serif'],
          },
          colors: {
            cuf: {
              navy:    '#002F6C',
              blue:    '#0071BC',
              mid:     '#0059A3',
              light:   '#E8F4FD',
              lighter: '#F0F7FF',
              border:  '#C5DDF5',
              muted:   '#5B8DB8',
              teal:    '#0099CC',
              success: '#1A7A4A',
              warn:    '#B45309',
            }
          }
        }
      }
    }
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link href="https://fonts.googleapis.com/css2?family=Barlow+Semi+Condensed:wght@400;600;700&family=Source+Sans+3:wght@300;400;600&display=swap" rel="stylesheet"/>
  <style>
    body { font-family: 'Source Sans 3', sans-serif; background: #F0F7FF; color: #1a2d47; }
    .font-display { font-family: 'Barlow Semi Condensed', sans-serif; }

    /* Nav */
    nav { background: #002F6C; }

    /* Cards */
    .card { background: white; border: 1px solid #C5DDF5; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,47,108,.06); }
    .card:hover { box-shadow: 0 4px 20px rgba(0,113,188,.15); }

    /* Buttons */
    .btn-primary { background: #0071BC; color: white; font-family: 'Barlow Semi Condensed',sans-serif; font-weight: 600; letter-spacing:.04em; border-radius: 8px; padding: 10px 22px; transition: background .2s; }
    .btn-primary:hover { background: #005A9A; }
    .btn-secondary { background: white; color: #0071BC; border: 1.5px solid #0071BC; font-family: 'Barlow Semi Condensed',sans-serif; font-weight: 600; letter-spacing:.04em; border-radius: 8px; padding: 9px 22px; transition: all .2s; }
    .btn-secondary:hover { background: #E8F4FD; }
    .btn-danger { background: #fee2e2; color: #b91c1c; border: 1px solid #fca5a5; border-radius: 6px; padding: 5px 12px; font-size:.75rem; font-family: 'Barlow Semi Condensed',sans-serif; font-weight: 600; transition: all .2s; }
    .btn-danger:hover { background: #fca5a5; }

    /* Inputs */
    .form-input { width:100%; background:white; border:1.5px solid #C5DDF5; border-radius:8px; padding:10px 14px; font-size:.9rem; color:#1a2d47; transition:border .2s, box-shadow .2s; }
    .form-input:focus { outline:none; border-color:#0071BC; box-shadow:0 0 0 3px rgba(0,113,188,.12); }
    .form-label { display:block; font-family:'Barlow Semi Condensed',sans-serif; font-weight:600; font-size:.8rem; letter-spacing:.06em; color:#5B8DB8; margin-bottom:6px; text-transform:uppercase; }

    /* Badge */
    .badge { display:inline-flex; align-items:center; gap:4px; padding:3px 10px; border-radius:20px; font-size:.72rem; font-family:'Barlow Semi Condensed',sans-serif; font-weight:600; letter-spacing:.04em; }
    .badge-blue { background:#E8F4FD; color:#0071BC; border:1px solid #C5DDF5; }
    .badge-green { background:#d1fae5; color:#065f46; border:1px solid #a7f3d0; }
    .badge-amber { background:#fef3c7; color:#92400e; border:1px solid #fde68a; }

    /* Flash */
    .flash-success { background:#d1fae5; color:#065f46; border:1px solid #a7f3d0; }
    .flash-error   { background:#fee2e2; color:#b91c1c; border:1px solid #fca5a5; }
    .flash-info    { background:#E8F4FD; color:#0071BC; border:1px solid #C5DDF5; }

    /* Scrollbar */
    ::-webkit-scrollbar { width:6px; }
    ::-webkit-scrollbar-track { background:#F0F7FF; }
    ::-webkit-scrollbar-thumb { background:#C5DDF5; border-radius:3px; }
    ::-webkit-scrollbar-thumb:hover { background:#0071BC; }

    /* Section divider */
    .section-title { font-family:'Barlow Semi Condensed',sans-serif; font-weight:700; font-size:1.05rem; color:#002F6C; letter-spacing:.04em; text-transform:uppercase; display:flex; align-items:center; gap:10px; }
    .section-title::after { content:''; flex:1; height:1px; background:#C5DDF5; }

    /* Skeleton hover tooltip */
    #skel-tooltip { position:fixed; pointer-events:none; z-index:1000; padding:6px 14px; background:#002F6C; color:white; border-radius:6px; font-family:'Barlow Semi Condensed',sans-serif; font-weight:600; font-size:.85rem; letter-spacing:.04em; display:none; box-shadow:0 4px 12px rgba(0,0,0,.2); }
    #skel-tooltip::after { content:''; position:absolute; top:100%; left:50%; transform:translateX(-50%); border:5px solid transparent; border-top-color:#002F6C; }
  </style>
</head>
<body class="min-h-screen">

<!-- NAVBAR -->
<nav class="sticky top-0 z-50 shadow-lg">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between h-16">
    <a href="{{ url_for('index') }}" class="flex items-center gap-3">
      <div class="w-10 h-10 rounded-lg bg-cuf-blue flex items-center justify-center shadow">
        <svg viewBox="0 0 24 24" fill="none" class="w-6 h-6" stroke="white" stroke-width="1.8">
          <circle cx="12" cy="8" r="3"/><path d="M6 20c0-4 2.7-7 6-7s6 3 6 7"/>
          <path d="M3 12h2M19 12h2M12 3v-1M12 21v1" stroke-linecap="round"/>
        </svg>
      </div>
      <div>
        <p class="font-display font-700 text-white text-lg leading-none tracking-wide">MRI PLANNING</p>
        <p class="text-cuf-border text-xs font-light tracking-widest">GUIDE CLÍNICO</p>
      </div>
    </a>
    <div class="flex items-center gap-3">
      <a href="{{ url_for('index') }}" class="text-cuf-border hover:text-white text-sm transition px-2">Início</a>
      {% if session.get('admin_logged_in') %}
        <a href="{{ url_for('admin_dashboard') }}" class="badge badge-blue">⚙ Admin</a>
        <a href="{{ url_for('admin_logout') }}" class="text-cuf-muted hover:text-white text-sm transition">Sair</a>
      {% else %}
        <a href="{{ url_for('admin_login') }}" class="text-cuf-border hover:text-white text-sm transition">Admin</a>
      {% endif %}
    </div>
  </div>
</nav>

<!-- FLASH -->
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <div class="max-w-2xl mx-auto px-4 pt-4 space-y-2 fixed top-16 left-0 right-0 z-40">
      {% for cat, msg in messages %}
        <div class="flash-{{ cat }} rounded-lg px-4 py-3 text-sm font-semibold shadow-lg flex items-center gap-2" id="flash-msg">
          {% if cat=='success' %}✓{% elif cat=='error' %}✗{% else %}ℹ{% endif %} {{ msg }}
        </div>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}

<div id="skel-tooltip"></div>

<main class="pt-0 min-h-screen">
  {% block content %}{% endblock %}
</main>

<footer class="bg-cuf-navy text-white mt-16">
  <div class="max-w-7xl mx-auto px-6 py-8 flex flex-col sm:flex-row items-center justify-between gap-4">
    <div>
      <p class="font-display font-700 text-lg tracking-wide">MRI Planning Guide</p>
      <p class="text-cuf-muted text-sm mt-0.5">Guia técnico para Técnicos de Radiologia</p>
    </div>
    <div class="text-right text-sm text-cuf-muted">
      <p>Área de Imagiologia</p>
      <p class="text-xs mt-0.5">© 2024 — Uso interno</p>
    </div>
  </div>
</footer>

<script>
  setTimeout(()=>{
    document.querySelectorAll('#flash-msg').forEach(el=>{
      el.style.transition='opacity .5s'; el.style.opacity='0';
      setTimeout(()=>el.remove(),500);
    });
  }, 4000);
</script>
{% block scripts %}{% endblock %}
</body>
</html>
