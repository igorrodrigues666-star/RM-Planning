{% extends 'base.html' %}
{% block title %}{% if category %}Editar{% else %}Nova{% endif %} Categoria{% endblock %}
{% block content %}
<div class="bg-cuf-navy text-white py-8 px-6">
  <div class="max-w-xl mx-auto">
    <a href="{{ url_for('admin_dashboard') }}" class="text-cuf-muted hover:text-white text-xs transition mb-4 inline-block">← Dashboard</a>
    <h1 class="font-display font-700 text-3xl tracking-wide">{% if category %}Editar Categoria{% else %}Nova Categoria{% endif %}</h1>
  </div>
</div>
<div class="max-w-xl mx-auto px-4 py-8">
  <div class="card p-8" style="border-top:3px solid #0071BC;">
    <form method="POST" class="space-y-6">
      <div>
        <label class="form-label">Nome da Região *</label>
        <input type="text" name="name" required value="{{ category.name if category else '' }}" placeholder="Ex: Cabeça e Crânio" class="form-input"/>
      </div>
      <div>
        <label class="form-label">Chave de Região (para esqueleto)</label>
        <select name="region_key" class="form-input">
          {% set keys = [('head','Cabeça'),('neck','Pescoço'),('chest','Tórax/Coração'),('abdomen','Abdómen'),('pelvis','Pelve'),('spine','Coluna Vertebral'),('upper_limbs','Membros Superiores'),('lower_limbs','Membros Inferiores'),('other','Outra')] %}
          {% for val,label in keys %}
          <option value="{{ val }}" {% if category and category.region_key==val %}selected{% endif %}>{{ label }} ({{ val }})</option>
          {% endfor %}
        </select>
        <p class="text-xs text-cuf-muted mt-1.5">Determina qual parte do esqueleto interativo fica ativa.</p>
      </div>
      <div>
        <label class="form-label">Cor de Destaque</label>
        <div class="flex items-center gap-4">
          <input type="color" name="color" value="{{ category.color if category else '#0071BC' }}" class="w-12 h-12 rounded-lg border border-cuf-border cursor-pointer"/>
          <div class="flex gap-2 flex-wrap">
            {% for c in ['#0071BC','#0059A3','#003F7F','#0099CC','#00557A','#0085D1','#005A8E','#002F6C'] %}
            <button type="button" onclick="document.querySelector('[name=color]').value='{{ c }}'" class="w-7 h-7 rounded-lg border-2 border-white shadow-sm" style="background:{{ c }};"></button>
            {% endfor %}
          </div>
        </div>
      </div>
      <div class="flex gap-3 pt-2">
        <button type="submit" class="btn-primary flex-1">{% if category %}Salvar Alterações{% else %}Criar Categoria{% endif %}</button>
        <a href="{{ url_for('admin_dashboard') }}" class="btn-secondary px-6">Cancelar</a>
      </div>
    </form>
  </div>
</div>
{% endblock %}
